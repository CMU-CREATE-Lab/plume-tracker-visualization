<!DOCTYPE html>
<html>
  <head>
    <title>The Shenango Channel</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="assets/css/jqeury-ui.min.css">
    <style type='text/css'>
      html, body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      #map-canvas {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    
    <h1>Pittsburgh Plume Visualization</h1>
    

  </head>
  <body>
	<script src="assets/javascript/jquery.min.js"></script>
        <script src="assets/javascript/jquery-ui.min.js"></script>
	<script src="assets/javascript/CanvasLayer.js"></script>
	<script src="map.js"></script>
	<div id='map-canvas'></div>  
	<script>
		/*
		var xhr = new XMLHttpRequest();
		xhr.open('GET', '/my/image/name.png', true);
		xhr.responseType = 'arraybuffer';
 
		xhr.onload = function(e) {
  			// response is unsigned 8 bit integer
  		var responseArray = new Float32Array(this.response); 
		console.log(responseArray)
			};
		*/
 
		// Initialize Map
		initMap('map-canvas');
	        google.maps.event.addDomListener(window, "load", initialize);
		
		function initialize(){
	           var map;
		   var canvasLayer;
		   var context;
		   var contextScale;
		   var resolutionScale;
		   var mapProjection;
		   var projectionScale = 2000;
		   var y_scale;
	//                   initMap('map-canvas');
		   setupCanvasLayerProjection();
		   $.get("https://data.cmucreatelab.org/purpleair-aggregates/purpleair_2018-07-29.json", function(data){
                        console.log(data);
			for(var i = 0; i < data.length; i++){
                                console.log(data[i])
				paintPM25(data[i])
                        }
                        console.log(data)
                })


		}	
		$( function() {
    			$( "#datepicker" ).datepicker();
  		} );

	</script>

	<p>Choose Date: <input type="date"></p>
  </body>
</html>

